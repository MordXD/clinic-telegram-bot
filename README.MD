# ๐ฅ Clinic Telegram Bot

[![Tests](https://img.shields.io/github/actions/workflow/status/MordXD/clinic-telegram-bot/ci.yml?label=tests)](../../actions)ยย[![Coverage](https://img.shields.io/badge/coverage-85%25-brightgreen)](../../actions)ยย[![Docker Pulls](https://img.shields.io/docker/pulls/mordxd/clinic-bot)](https://hub.docker.com/r/mordxd/clinic-bot)

![ะฆะตะฝัั ะฐะบััะตัััะฒะฐ ะธ ะณะธะฝะตะบะพะปะพะณะธะธ](telegram_bot/assets/image.png)

> **ะะฒัะพะผะฐัะธะทะธััะตั ะฟัะธัะผ ะทะฐัะฒะพะบ ะธ ัะฑะพั ะพัะทัะฒะพะฒ ะฟะฐัะธะตะฝัะพะฒ.**
> ะะฐ ัััั ัะฐั-ะฑะพัะฐ ะบะปะธะฝะธะบะฐ ัะบะพะฝะพะผะธั โ 3ยั ัััะฝัั ะทะฒะพะฝะบะพะฒ ะฒ ะฝะตะดะตะปั ะธ ะฟะพะปััะฐะตั <50ยะผั ะพัะบะปะธะบ ะพั RESTโAPI.

---

## ๐ TL;DR โ ะฑัััััะน ััะฐัั

```bash
git clone https://github.com/MordXD/clinic-telegram-bot.git
cd clinic-telegram-bot
make dev         # docker-compose up bot + api + postgres + grafana
open http://localhost:8000/docs  # Swagger
```

---

## ๐ฏ ะะปััะตะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

| ะะพะดัะปั            | ะงัะพ ะดะตะปะฐะตั                                            | ะขะตัโััะตะบ                             |
| ----------------- | ----------------------------------------------------- | ------------------------------------ |
| **Telegram Bot**  | ะฐัะธะฝัั. ัะตะฝะดะปะตัั `/start`, ะทะฐัะฒะบะธ, ะพัะทัะฒั             | `python-telegram-bot v21`, `asyncio` |
| **REST API**      | CRUD / JWTโauth `/applications`, `/reviews`, `/stats` | **FastAPI**, Pydanticยv2             |
| **Data Layer**    | ััะฐะฝะธั ะทะฐัะฒะบะธ/ะพัะทัะฒั, ะผะธะณัะฐัะธะธ                        | **PostgreSQL**, SQLModel, Alembic    |
| **Observability** | ะผะตััะธะบะธ & ะปะพะณะธ                                        | Prometheus, Grafana, structlog       |
| **CI/CD**         | lint โ mypy โ pytest โ Docker image                   | GitHub Actions                       |

---

## ๐ผ๏ธ ะััะธัะตะบัััะฐ

```mermaid
flowchart LR
  TG(Telegram) -->|HTTPS| Bot
  subgraph Docker-Compose
      Bot -->|Async REST| API
      API --> DB[(PostgreSQL)]
      API --> Prom[Prometheus]
      Prom --> Grafana
  end
```

---

## ๐ ะะตะทัะปััะฐัั

* โฑ๏ธ ะกัะตะดะฝะตะต ะฒัะตะผั ะพัะบะปะธะบะฐ API: **<ย50ยะผั** (Locust, 100ยRPS).
* ๐ฌ >ย200 ะทะฐัะฒะพะบ ะธ ะพัะทัะฒะพะฒ / ะผะตััั ั ะฟะธะปะพัะฝะพะน ะบะปะธะฝะธะบะธ.
* ๐งช ะขะตััโะฟะพะบัััะธะต ะบะพะดะฐ: **85ย%** (unit + ะธะฝัะตะณัะฐัะธะพะฝะฝัะต).

---

## ๐๏ธ ะฃััะฐะฝะพะฒะบะฐ (ะฟะพะดัะพะฑะฝะพ)

### 1. ะะปะพะฝะธัะพะฒะฐัั ะธ ะฝะฐัััะพะธัั `.env`

```bash
cp .env.example .env   # TELEGRAM_BOT_TOKEN, ADMIN_CHAT_ID, DB creds
```

### 2. ะะฐะฟััะบ ะฒ Docker

```bash
docker compose up --build    # bot, api, db, grafana
```

### 3. ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ ะฑะตะท Docker

```bash
python -m venv venv && source venv/bin/activate
pip install -r requirements.txt
alembic upgrade head
python bot/main.py            # telegramโะฑะพั
uvicorn api.main:app --reload # RESTโAPI
```

---

## ๐งช ะขะตััั

```bash
pytest -q
```

---

## ๐ API ะดะพะบัะผะตะฝัะฐัะธั

Swagger ะดะพัััะฟะตะฝ ะฟะพัะปะต ะทะฐะฟััะบะฐ: `http://localhost:8000/docs`

---

## ๐บ๏ธ ะะพัะพะถะฝะฐั ะบะฐััะฐ

* [x] Asyncโัะตัะฐะบัะพัะธะฝะณ `python-telegram-bot v21`
* [x] JWTโัะพะปั ยซadminยป
* [ ] Webโhook ะฒะผะตััะพ longโpolling
* [ ] SMSโัะฒะตะดะพะผะปะตะฝะธั ัะตัะตะท Twilio

---

## ๐ค Contributing

PR ะธ issueโัะฐะฑะปะพะฝั ัะถะต ะฝะฐัััะพะตะฝั โ welcome!

---

## ๐ฐ ะะธัะตะฝะทะธั

MIT ยฉย2025 Egorย(MordXD)
